---
title: 如何实现语言切换功能
date: 2021-01-01 12:00:00
categories: [技术]
tags: [技术, 前端]
---

## 前言

在一些网站中，我们会看到多语言切换的功能，那么如何实现语言切换功能呢？

方法：

1. 使用 react-i18next 库，github 地址：https://github.com/i18next/react-i18next
2. 自己构建一套语言库，使用 useContext 进行语言切换管理，本质上就是一个对象中存储了不同语言的翻译内容，然后通过 useContext 进行切换。

## 2. 自己构建一套语言库

```typescript
import { createContext } from 'react';

export const LanguageContext = createContext(null);
```

```typescript
import { LanguageContext } from './Context';
import { translations } from '@/utils/Language';
import type { Language } from '@/utils/Language';
import { useState, useMemo, useEffect } from 'react';

export const LanguageProvider = ({ children }) => {
  const [lang, setLang] = useState<Language>('zh');

  const t = useMemo(() => translations[lang], [lang]);

  const switchLang = (newLocale: Language) => {
    setLang(newLocale);
  };

  return <LanguageContext value={{ lang, t, switchLang }}>{children}</LanguageContext>;
};
```

```typescript
import './i18n/index.js';
import App from './App';
import '@styles/global.css';
import '@styles/Tailwind.css';
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import { ThemeProvider } from '@/context/ThemeProvider';
import { LanguageProvider } from '@/context/LanguageProvider';

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <ThemeProvider>
      <LanguageProvider>
        <App />
      </LanguageProvider>
    </ThemeProvider>
  </StrictMode>,
);
```

后面就可以在各个组件中使用上下文访问了
