
/**
 * @description: 这是一个自动生成的文件,请不要轻易修改它.
 * @source: D:/code/dome/JavaScript/react/react_dome/source/post/react/hooks/useRef1.md
 * @script: scripts/md-to-tsx
 */

import React from 'react';

export const metadata = {
  "title": "useRef",
  "path": "D:/code/dome/JavaScript/react/react_dome/src/generated/react/hooks/useRef1.tsx",
  "relativePath": "react/hooks/useRef1.md",
  "category": [
    "react",
    "hooks"
  ],
  "headings": [
    {
      "level": 1,
      "text": "useRef",
      "id": "useref"
    },
    {
      "level": 2,
      "text": "摘自",
      "id": "摘自"
    },
    {
      "level": 2,
      "text": "特点",
      "id": "特点"
    },
    {
      "level": 2,
      "text": "常见使用场景",
      "id": "常见使用场景"
    },
    {
      "level": 3,
      "text": "1. 处理DOM元素",
      "id": "1-处理dom元素"
    },
    {
      "level": 3,
      "text": "2. 存储可变值（不触发渲染）",
      "id": "2-存储可变值不触发渲染"
    },
    {
      "level": 3,
      "text": "3. 保存定时器或副作用相关值",
      "id": "3-保存定时器或副作用相关值"
    },
    {
      "level": 2,
      "text": "对比",
      "id": "对比"
    }
  ],
  "frontMatter": {
    "title": "useRef",
    "author": "8023time",
    "date": "2025-11-04T00:00:00.000Z"
  }
};

const MarkdownComponent: React.FC = () => {
  // 渲染 Markdown 内容，使用 dangerouslySetInnerHTML
  return (
    <div
      className="markdown-content-wrapper prose prose-slate dark:prose-invert max-w-none"
      dangerouslySetInnerHTML={{ __html: "<h1 id=\"useref\" class=\"text-3xl md:text-4xl font-sans font-bold tracking-tight text-black mt-12 mb-8 pb-3 border-b border-gray-300/50 scroll-mt-24 selection:bg-gray-200/40\">useRef</h1>\n<blockquote class=\"border-l-4 border-gray-400 bg-gray-50/60 pl-5 pr-5 py-3 my-6 rounded-xl italic text-gray-900 ring-1 ring-gray-200/30\">\n<p class=\"text-base md:text-lg font-sans leading-[1.75] tracking-[0.01em] text-black mb-4 selection:bg-gray-200/40\">当你在React中需要处理DOM元素或需要在组件渲染之间保持持久性数据时，便可以使用useRef。</p>\n</blockquote>\n<div class=\"relative rounded-2xl ring-1 ring-gray-200 border border-gray-300 overflow-hidden my-6 p-4 pt-8 bg-[#262335]\"><div class=\"absolute top-3 left-4 flex items-center gap-2\"><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#FF5F56]\"></button><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#FFBD2E]\"></button><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#27C93F]\"></button></div><pre class=\"shiki shiki-themes synthwave-84 synthwave-84\" style=\"background-color:#262335;--shiki-dark-bg:#262335;color:#bbbbbb;--shiki-dark:#bbbbbb\" tabindex=\"0\" class=\"bg-[#1e1e1e] text-gray-100 font-mono text-[15px] leading-[1.65] rounded-xl p-6 pt-8 overflow-x-auto border-t border-t-[#353942] [counter-reset:line]\"><code><span class=\"line\"><span style=\"color:#72F1B8;--shiki-dark:#72F1B8\">import</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> { </span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">useRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> } </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">from</span><span style=\"color:#FF8B39;--shiki-dark:#FF8B39\"> 'react'</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">const</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> refContainer</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\"> =</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> useRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">initialValue</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">);</span></span></code></pre></div>\n<h2 id=\"摘自\" class=\"text-2xl md:text-3xl font-sans font-semibold tracking-tight text-gray-900 mt-10 mb-5 pb-2 border-b border-gray-300/40 scroll-mt-20 selection:bg-gray-200/40\">摘自</h2>\n<ol class=\"list-none pl-8 my-5 space-y-3 [counter-reset:list-counter] [&#x26;_li]:[counter-increment:list-counter] [&#x26;_li]:before:content-[counter(list-counter)] [&#x26;_li]:before:absolute [&#x26;_li]:before:left-[-2rem] [&#x26;_li]:before:flex [&#x26;_li]:before:items-center [&#x26;_li]:before:justify-center [&#x26;_li]:before:w-6 [&#x26;_li]:before:h-6 [&#x26;_li]:before:rounded-full [&#x26;_li]:before:bg-gray-200 [&#x26;_li]:before:text-black [&#x26;_li]:before:text-sm [&#x26;_li]:before:font-medium [&#x26;_li]:before:shadow-sm\">\n<li class=\"text-base text-black leading-relaxed relative\"><a href=\"https://message163.github.io/react-docs/react/hooks/useRef.html#%E9%80%9A%E8%BF%87ref%E6%93%8D%E4%BD%9Cdom%E5%85%83%E7%B4%A0\" class=\"text-blue-700 underline-offset-4 decoration-blue-400/50 hover:underline hover:decoration-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-300/50 focus:rounded-sm transition-all duration-200 ease-out\">小满 - useRef </a></li>\n<li class=\"text-base text-black leading-relaxed relative\"><a href=\"https://zh-hans.react.dev/reference/react/useRef\" class=\"text-blue-700 underline-offset-4 decoration-blue-400/50 hover:underline hover:decoration-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-300/50 focus:rounded-sm transition-all duration-200 ease-out\">React 官方文档 - useRef</a></li>\n</ol>\n<h2 id=\"特点\" class=\"text-2xl md:text-3xl font-sans font-semibold tracking-tight text-gray-900 mt-10 mb-5 pb-2 border-b border-gray-300/40 scroll-mt-20 selection:bg-gray-200/40\">特点</h2>\n<ul class=\"list-disc list-outside pl-6 my-5 space-y-2 marker:text-gray-700\">\n<li class=\"text-base text-black leading-relaxed relative\">持久性：ref 对象在组件的整个生命周期中保持不变，React 不会在每次渲染时创建新的 ref 对象。</li>\n<li class=\"text-base text-black leading-relaxed relative\">可变性：ref.current 是可变的，你可以随意修改它的值，且不会触发重新渲染。</li>\n<li class=\"text-base text-black leading-relaxed relative\">初始值：useRef(initialValue) 的 initialValue 只在组件首次挂载时使用，后续重新渲染不会重置 .current。</li>\n</ul>\n<h2 id=\"常见使用场景\" class=\"text-2xl md:text-3xl font-sans font-semibold tracking-tight text-gray-900 mt-10 mb-5 pb-2 border-b border-gray-300/40 scroll-mt-20 selection:bg-gray-200/40\">常见使用场景</h2>\n<ol class=\"list-none pl-8 my-5 space-y-3 [counter-reset:list-counter] [&#x26;_li]:[counter-increment:list-counter] [&#x26;_li]:before:content-[counter(list-counter)] [&#x26;_li]:before:absolute [&#x26;_li]:before:left-[-2rem] [&#x26;_li]:before:flex [&#x26;_li]:before:items-center [&#x26;_li]:before:justify-center [&#x26;_li]:before:w-6 [&#x26;_li]:before:h-6 [&#x26;_li]:before:rounded-full [&#x26;_li]:before:bg-gray-200 [&#x26;_li]:before:text-black [&#x26;_li]:before:text-sm [&#x26;_li]:before:font-medium [&#x26;_li]:before:shadow-sm\">\n<li class=\"text-base text-black leading-relaxed relative\">处理DOM元素</li>\n<li class=\"text-base text-black leading-relaxed relative\">保持持久性数据</li>\n</ol>\n<h3 id=\"1-处理dom元素\" class=\"text-xl md:text-2xl font-sans font-medium tracking-tight text-gray-900 mt-8 mb-4 scroll-mt-20\">1. 处理DOM元素</h3>\n<p class=\"text-base md:text-lg font-sans leading-[1.75] tracking-[0.01em] text-black mb-4 selection:bg-gray-200/40\">参数</p>\n<ul class=\"list-disc list-outside pl-6 my-5 space-y-2 marker:text-gray-700\">\n<li class=\"text-base text-black leading-relaxed relative\">initialValue：ref 对象的 current 属性的初始值。可以是任意类型的值。这个参数在首次渲染后被忽略。</li>\n</ul>\n<p class=\"text-base md:text-lg font-sans leading-[1.75] tracking-[0.01em] text-black mb-4 selection:bg-gray-200/40\">返回值</p>\n<ul class=\"list-disc list-outside pl-6 my-5 space-y-2 marker:text-gray-700\">\n<li class=\"text-base text-black leading-relaxed relative\"><code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">useRef</code>返回一个对象，对象的current属性指向传入的初始值。 {current:xxxx}</li>\n</ul>\n<div class=\"relative rounded-2xl ring-1 ring-gray-200 border border-gray-300 overflow-hidden my-6 p-4 pt-8 bg-[#262335]\"><div class=\"absolute top-3 left-4 flex items-center gap-2\"><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#FF5F56]\"></button><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#FFBD2E]\"></button><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#27C93F]\"></button></div><pre class=\"shiki shiki-themes synthwave-84 synthwave-84\" style=\"background-color:#262335;--shiki-dark-bg:#262335;color:#bbbbbb;--shiki-dark:#bbbbbb\" tabindex=\"0\" class=\"bg-[#1e1e1e] text-gray-100 font-mono text-[15px] leading-[1.65] rounded-xl p-6 pt-8 overflow-x-auto border-t border-t-[#353942] [counter-reset:line]\"><code><span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">import</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> { </span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">useRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> } </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">from</span><span style=\"color:#FF8B39;--shiki-dark:#FF8B39\"> \"react\"</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">function</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> App</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">() {</span></span>\n<span class=\"line\"><span style=\"color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#848BBD;--shiki-dark-font-style:italic\">  //首先，声明一个 初始值 为 null 的 ref 对象</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">  let</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> div</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\"> =</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> useRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(</span><span style=\"color:#F97E72;--shiki-dark:#F97E72\">null</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">)</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">  const</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> heandleClick</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\"> =</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> () </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">=></span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> {</span></span>\n<span class=\"line\"><span style=\"color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#848BBD;--shiki-dark-font-style:italic\">    //当 React 创建 DOM 节点并将其渲染到屏幕时，React 将会把 DOM 节点设置为 ref 对象的 current 属性</span></span>\n<span class=\"line\"><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">    console</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">.</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\">log</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">div</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">.</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">current</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">)</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">  }</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">  return</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> (</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">    &#x3C;></span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">      {</span><span style=\"color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#848BBD;--shiki-dark-font-style:italic\">/*然后将 ref 对象作为 ref 属性传递给想要操作的 DOM 节点的 JSX*/</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">}</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">      &#x3C;</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">div</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> ref</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\">=</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">{</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">div</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">}</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">></span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">dom元素</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">&#x3C;/</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">div</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">></span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">      &#x3C;</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">button</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> onClick</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\">=</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">{</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">heandleClick</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">}</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">></span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">获取dom元素</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">&#x3C;/</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">button</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">></span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">    &#x3C;/></span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">  )</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">}</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">export</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\"> default</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> App</span></span></code></pre></div>\n<h3 id=\"2-存储可变值不触发渲染\" class=\"text-xl md:text-2xl font-sans font-medium tracking-tight text-gray-900 mt-8 mb-4 scroll-mt-20\">2. 存储可变值（不触发渲染）</h3>\n<p class=\"text-base md:text-lg font-sans leading-[1.75] tracking-[0.01em] text-black mb-4 selection:bg-gray-200/40\"><code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">useRef</code> 可以存储任意值（如计数器、定时器 ID、或上一次的状态），这些值在组件生命周期内保持持久化，且修改它们不会触发重新渲染。这与 <code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">useState</code> 不同，<code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">useState</code> 的更新会导致组件重新渲染。\r\n示例：记录上一次状态</p>\n<div class=\"relative rounded-2xl ring-1 ring-gray-200 border border-gray-300 overflow-hidden my-6 p-4 pt-8 bg-[#262335]\"><div class=\"absolute top-3 left-4 flex items-center gap-2\"><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#FF5F56]\"></button><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#FFBD2E]\"></button><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#27C93F]\"></button></div><pre class=\"shiki shiki-themes synthwave-84 synthwave-84\" style=\"background-color:#262335;--shiki-dark-bg:#262335;color:#bbbbbb;--shiki-dark:#bbbbbb\" tabindex=\"0\" class=\"bg-[#1e1e1e] text-gray-100 font-mono text-[15px] leading-[1.65] rounded-xl p-6 pt-8 overflow-x-auto border-t border-t-[#353942] [counter-reset:line]\"><code><span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">import</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> React</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">, { </span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">useState</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">, </span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">useRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">, </span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">useEffect</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> } </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">from</span><span style=\"color:#FF8B39;--shiki-dark:#FF8B39\"> 'react'</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">function</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> Counter</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">() {</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">  const</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> [</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">count</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">, </span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">setCount</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">] </span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\">=</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> useState</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(</span><span style=\"color:#F97E72;--shiki-dark:#F97E72\">0</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">);</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">  const</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> prevCountRef</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\"> =</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> useRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\">  useEffect</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(() </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">=></span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> {</span></span>\n<span class=\"line\"><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">    prevCountRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">.</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">current</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\"> =</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> count</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">; </span><span style=\"color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#848BBD;--shiki-dark-font-style:italic\">// 每次 count 更新时，记录上一次的 count</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">  }, [</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">count</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">]);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">  return</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">    &#x3C;</span><span style=\"color:#FE4450;--shiki-dark:#FE4450\">div</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">></span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">      &#x3C;</span><span style=\"color:#FE4450;--shiki-dark:#FE4450\">p</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">></span><span style=\"color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FF7EDB;--shiki-dark-font-style:italic\">当前计数</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">:</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> {</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">count</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">}&#x3C;/</span><span style=\"color:#FE4450;--shiki-dark:#FE4450\">p</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">></span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">      &#x3C;</span><span style=\"color:#FE4450;--shiki-dark:#FE4450\">p</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">></span><span style=\"color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FF7EDB;--shiki-dark-font-style:italic\">上一次计数</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">:</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> {</span><span style=\"color:#FE4450;--shiki-dark:#FE4450\">prevCountRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">.</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">current</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">}&#x3C;/</span><span style=\"color:#FE4450;--shiki-dark:#FE4450\">p</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">></span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">      &#x3C;</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">button</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> onClick</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\">=</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">{() => </span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\">setCount</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(</span><span style=\"color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FF7EDB;--shiki-dark-font-style:italic\">count</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> + 1)}</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">></span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">增加</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">&#x3C;/</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">button</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">></span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">    &#x3C;/</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">div</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">></span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">  );</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">}</span></span></code></pre></div>\n<p class=\"text-base md:text-lg font-sans leading-[1.75] tracking-[0.01em] text-black mb-4 selection:bg-gray-200/40\">说明：</p>\n<ul class=\"list-disc list-outside pl-6 my-5 space-y-2 marker:text-gray-700\">\n<li class=\"text-base text-black leading-relaxed relative\"><code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">prevCountRef.current</code> 用于存储上一次的 count 值。</li>\n<li class=\"text-base text-black leading-relaxed relative\">修改 <code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">prevCountRef.current</code> 不会触发重新渲染，因此适合存储不需要更新 UI 的值。</li>\n<li class=\"text-base text-black leading-relaxed relative\">在 <code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">useEffect</code> 中更新 p<code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">revCountRef.current</code>，确保它总是保存上一次的 count。</li>\n</ul>\n<h3 id=\"3-保存定时器或副作用相关值\" class=\"text-xl md:text-2xl font-sans font-medium tracking-tight text-gray-900 mt-8 mb-4 scroll-mt-20\">3. 保存定时器或副作用相关值</h3>\n<p class=\"text-base md:text-lg font-sans leading-[1.75] tracking-[0.01em] text-black mb-4 selection:bg-gray-200/40\"><code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">useRef</code> 常用于保存定时器 ID 或其他副作用相关的值，以确保在组件卸载时正确清理。</p>\n<div class=\"relative rounded-2xl ring-1 ring-gray-200 border border-gray-300 overflow-hidden my-6 p-4 pt-8 bg-[#262335]\"><div class=\"absolute top-3 left-4 flex items-center gap-2\"><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#FF5F56]\"></button><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#FFBD2E]\"></button><button class=\"w-3.5 h-3.5 rounded-full transition-all duration-200 hover:scale-110 bg-[#27C93F]\"></button></div><pre class=\"shiki shiki-themes synthwave-84 synthwave-84\" style=\"background-color:#262335;--shiki-dark-bg:#262335;color:#bbbbbb;--shiki-dark:#bbbbbb\" tabindex=\"0\" class=\"bg-[#1e1e1e] text-gray-100 font-mono text-[15px] leading-[1.65] rounded-xl p-6 pt-8 overflow-x-auto border-t border-t-[#353942] [counter-reset:line]\"><code><span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">import</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> React</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">, { </span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">useRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">, </span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">useEffect</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> } </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">from</span><span style=\"color:#FF8B39;--shiki-dark:#FF8B39\"> 'react'</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">function</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> Timer</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">() {</span></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">  const</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\"> timerRef</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\"> =</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> useRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(</span><span style=\"color:#F97E72;--shiki-dark:#F97E72\">null</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\">  useEffect</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(() </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">=></span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> {</span></span>\n<span class=\"line\"><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">    timerRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">.</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">current</span><span style=\"color:#FFFFFFEE;--shiki-dark:#FFFFFFEE\"> =</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\"> setInterval</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(() </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">=></span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> {</span></span>\n<span class=\"line\"><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">      console</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">.</span><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\">log</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(</span><span style=\"color:#FF8B39;--shiki-dark:#FF8B39\">'定时器运行中...'</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">);</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">    }, </span><span style=\"color:#F97E72;--shiki-dark:#F97E72\">1000</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">    return</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> () </span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">=></span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> {</span></span>\n<span class=\"line\"><span style=\"color:#36F9F6;--shiki-dark:#36F9F6\">      clearInterval</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">(</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">timerRef</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">.</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">current</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">); </span><span style=\"color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#848BBD;--shiki-dark-font-style:italic\">// 组件卸载时清理定时器</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">    };</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">  }, []);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">  return</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\"> &#x3C;</span><span style=\"color:#FE4450;--shiki-dark:#FE4450\">div</span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">></span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">检查控制台输出</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">&#x3C;/</span><span style=\"color:#FF7EDB;--shiki-dark:#FF7EDB\">div</span><span style=\"color:#FEDE5D;--shiki-dark:#FEDE5D\">></span><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">;</span></span>\n<span class=\"line\"><span style=\"color:#BBBBBB;--shiki-dark:#BBBBBB\">}</span></span></code></pre></div>\n<h2 id=\"对比\" class=\"text-2xl md:text-3xl font-sans font-semibold tracking-tight text-gray-900 mt-10 mb-5 pb-2 border-b border-gray-300/40 scroll-mt-20 selection:bg-gray-200/40\">对比</h2>\n<table class=\"w-full border-collapse my-6 text-left text-sm rounded-xl overflow-hidden ring-1 ring-gray-200\">\n<thead class=\"bg-gray-100 text-black font-medium\">\n<tr class=\"hover:bg-gray-50 transition-colors duration-150\">\n<th class=\"px-4 py-2 font-medium text-black border-b border-gray-200\"><strong class=\"font-semibold text-black\">特性</strong></th>\n<th class=\"px-4 py-2 font-medium text-black border-b border-gray-200\"><strong class=\"font-semibold text-black\">useRef</strong></th>\n<th class=\"px-4 py-2 font-medium text-black border-b border-gray-200\"><strong class=\"font-semibold text-black\">useState</strong></th>\n</tr>\n</thead>\n<tbody class=\"divide-y divide-gray-200\">\n<tr class=\"hover:bg-gray-50 transition-colors duration-150\">\n<td class=\"px-4 py-2 text-black border-b border-gray-200\"><strong class=\"font-semibold text-black\">触发重新渲染</strong></td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">不会</td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">会</td>\n</tr>\n<tr class=\"hover:bg-gray-50 transition-colors duration-150\">\n<td class=\"px-4 py-2 text-black border-b border-gray-200\"><strong class=\"font-semibold text-black\">数据持久性</strong></td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">在组件生命周期内持久化</td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">状态更新后重新渲染，旧值可能丢失</td>\n</tr>\n<tr class=\"hover:bg-gray-50 transition-colors duration-150\">\n<td class=\"px-4 py-2 text-black border-b border-gray-200\"><strong class=\"font-semibold text-black\">典型用途</strong></td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">访问 DOM、存储不触发渲染的值</td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">管理需要更新 UI 的状态值</td>\n</tr>\n<tr class=\"hover:bg-gray-50 transition-colors duration-150\">\n<td class=\"px-4 py-2 text-black border-b border-gray-200\"><strong class=\"font-semibold text-black\">更新方式</strong></td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">直接修改 <code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">ref.current</code></td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">通过 <code class=\"font-mono text-[0.95rem] leading-relaxed bg-gray-100 text-black px-[0.4em] py-[0.25em] rounded-md border border-gray-200 shadow-sm tracking-tight hover:bg-gray-200/60 transition-all duration-200 ease-out\">setState</code> 更新</td>\n</tr>\n<tr class=\"hover:bg-gray-50 transition-colors duration-150\">\n<td class=\"px-4 py-2 text-black border-b border-gray-200\"><strong class=\"font-semibold text-black\">何时选择</strong></td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">需要持久化数据或操作 DOM 时使用</td>\n<td class=\"px-4 py-2 text-black border-b border-gray-200\">需要更新 UI 时使用</td>\n</tr>\n</tbody>\n</table>" }}
    />
  );
};

export default MarkdownComponent;
